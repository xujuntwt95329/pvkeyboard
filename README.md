# pvkeyboard
A soft keyboard for pvbrowser.

## USING PVKEYBOARD IN YOUR PROJECT
The pvkeyboard is implemented by a modal dialog, to add it to your project, follow these steps:

1. Add pvkeyboard.h to HEADERS and pvkeyboard.cpp to SOURCES in the project file.
	 ``` qt
	HEADERS += pvapp.h      \
			mask1_slots.h \
			...           \
			pvkeyboard.h
	SOURCES += main.cpp     \
			mask1.cpp     \
			...           \
			pvkeyboard.cpp
	```
2. Add declaration of pvkeyboard function into header file.
	 ``` cpp
	#include "processviewserver.h"
	// todo: comment me out
	//#include "rlmodbusclient.h"
	//#include "rlsiemenstcpclient.h"
	...
  
	int show_mask1(PARAM *p);      
	...                         //These are generated by pvdevelop.

	int pvkeyboard(PARAM *p);   //You should add this line.
	```
3. Create an array for your text editor in the 'DATA' structure provided by pvb in the slot file.
	 ```cpp
	typedef struct // (todo: define your data structure here)
	{
		char inputdata1[1024];
	}
	DATA;
	```
	you may need different arrays for different text editors. 

4. In the slot file, call the dialog to show this keyboard.
	 ``` cpp
	static int slotButtonEvent(PARAM *p, int id, DATA *d)
	{
		if(p == NULL || id == 0 || d == NULL) return -1;
		if(id == 1)
			pvRunModalDialog(p,1100,500,pvkeyboard,d->inputdata1,NULL,NULL,NULL);
		return 0;
	}
	```
	the id belongs to the LineEdit widget. 

5. By pressing 'enter' in the soft keyboard, the keyboard dialog will terminate and update the base window by 
slotNullEvent, so you can display the text in slotNullEvent function. 
	 ``` cpp
	static int slotNullEvent(PARAM *p, DATA *d)
	{
		if(p == NULL || d == NULL) return -1;
		pvPrintf(p,1,"%s",d->inputdata1);
		return 0;
	} 
	```
	where '1' is the id of your LineEdit widget.
